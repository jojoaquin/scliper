"use strict";var J=Object.defineProperty;var c=(e,t)=>J(e,"name",{value:t,configurable:!0});var I=require("./get-pipe-path-BoR10qr8.cjs"),P=require("node:module"),p=require("node:path"),w=require("node:url"),y=require("get-tsconfig"),Q=require("node:fs"),b=require("./index-BsW12Ot9.cjs"),T=require("./client-D6NvIMSC.cjs");const k=[".js",".json",".ts",".tsx",".jsx"],g=Object.create(null);g[".js"]=[".ts",".tsx",".js",".jsx"],g[".jsx"]=[".tsx",".ts",".jsx",".js"],g[".cjs"]=[".cts"],g[".mjs"]=[".mts"];const O=c((e,t)=>{const n=e.split("?");let[r]=n;const s=p.extname(r);let a=g[s];if(a)r=r.slice(0,-s.length);else{if(!t)return;a=k}return a.map(i=>r+i+(n[1]?`?${n[1]}`:""))},"mapTsExtensions"),B=c(e=>{const t=e.indexOf(":");if(t!==-1)return e.slice(0,t)},"getScheme"),R=c(e=>e[0]==="."&&(e[1]==="/"||e[1]==="."||e[2]==="/"),"isRelativePath"),z=c(e=>R(e)||p.isAbsolute(e),"isUnixPath"),G=c(e=>{if(z(e))return!0;const t=B(e);return t&&t!=="node"},"requestAcceptsQuery"),U="file://",F=/\.([cm]?ts|[tj]sx)($|\?)/,H=/\.json($|\?)/,X=/\/(?:$|\?)/,L=/^(?:@[^/]+\/)?[^/\\]+$/;exports.fileMatcher=void 0,exports.tsconfigPathsMatcher=void 0,exports.allowJs=!1;const $=c(e=>{let t=null;if(e){const n=p.resolve(e);t={path:n,config:y.parseTsconfig(n)}}else{try{t=y.getTsconfig()}catch{}if(!t)return}exports.fileMatcher=y.createFilesMatcher(t),exports.tsconfigPathsMatcher=y.createPathsMatcher(t),exports.allowJs=t?.config.compilerOptions?.allowJs??!1},"loadTsconfig"),E=c(e=>Array.from(e).length>0?`?${e.toString()}`:"","urlSearchParamsStringify"),v=[".ts",".tsx",".jsx"],A=c((e,...t)=>{for(const n of v){const r=t.slice();r[0]+=n;try{return e(...r)}catch{}}},"tryExtensions"),K=c(e=>(t,...n)=>{try{return e(t,...n)}catch(r){const s=r;if(s.code==="MODULE_NOT_FOUND"&&!L.test(t)){const a=A(e,t,...n)||A(e,`${t}${p.sep}index`,...n);if(a)return a}throw s}},"createImplicitResolver"),V=`${p.sep}node_modules${p.sep}`,D=c(e=>{if(!e.startsWith("data:text/javascript,"))return;const t=e.indexOf("?");if(t===-1)return;const r=new URLSearchParams(e.slice(t+1)).get("filePath");if(r)return r},"getOriginalFilePath"),N=c(e=>{const t=D(e);return t&&(P._cache[t]=P._cache[e],delete P._cache[e],e=t),e},"interopCjsExports"),j=c((e,t,n)=>{if(!(n?.filename&&F.test(n.filename))&&!exports.allowJs)return;const r=O(t);if(r)for(const s of r)try{return e(s)}catch(a){const{code:i}=a;if(i!=="MODULE_NOT_FOUND"&&i!=="ERR_PACKAGE_PATH_NOT_EXPORTED")throw a}},"resolveTsFilename"),Y=c((e,t,n)=>{if(e.startsWith(U)&&(e=w.fileURLToPath(e)),exports.tsconfigPathsMatcher&&!R(e)&&!t?.filename?.includes(V)){const s=exports.tsconfigPathsMatcher(e);for(const a of s){const i=j(n,a,t);if(i)return i;try{return n(a)}catch{}}}const r=j(n,e,t);if(r)return r;try{return n(e)}catch(s){const a=s;if(a.code==="MODULE_NOT_FOUND"&&typeof a.path=="string"&&a.path.endsWith(`${p.sep}package.json`)){const i=a.message.match(/^Cannot find module '([^']+)'$/);if(i){const d=i[1],f=j(n,d,t);if(f)return f}const o=a.message.match(/^Cannot find module '([^']+)'. Please verify that the package.json has a valid "main" entry$/);if(o){const d=o[1],f=j(n,d,t);if(f)return f}}throw a}},"resolveRequest"),Z=c((e,t,n)=>(r,s,a,i)=>{if(e.enabled===!1)return t(r,s,a,i);const o=c(u=>t(u,s,a,i),"resolve");if(r=N(r),s?.filename){const u=D(s.filename);u&&(s.filename=u.split("?")[0])}const d=r.split("?"),f=new URLSearchParams(d[1]);if(s?.filename){const m=new URLSearchParams(s.filename.split("?")[1]).get("namespace");m&&f.append("namespace",m)}if((f.get("namespace")??void 0)!==n)return o(r);n&&(t=K(t));let h=Y(d[0],s,o);return p.isAbsolute(h)&&!h.endsWith(".json")&&!h.endsWith(".node")&&(h+=E(f)),h},"createResolveFilename"),q=`
//# sourceMappingURL=data:application/json;base64,`,W=c(()=>process.sourceMapsEnabled??!0,"shouldApplySourceMap"),_=c(({code:e,map:t})=>e+q+Buffer.from(JSON.stringify(t),"utf8").toString("base64"),"inlineSourceMap"),ee=[".cts",".mts",".ts",".tsx",".jsx"],te=[".js",".cjs",".mjs"],M=c((e,t,n,r)=>{const s=Object.getOwnPropertyDescriptor(e,t);s?.set?e[t]=n:(!s||s.configurable)&&Object.defineProperty(e,t,{value:n,enumerable:s?.enumerable||r?.enumerable,writable:r?.writable??(s?s.writable:!0),configurable:r?.configurable??(s?s.configurable:!0)})},"safeSet"),se=c((e,t,n)=>{const r=t[".js"],s=c((a,i)=>{if(e.enabled===!1)return r(a,i);const[o,d]=i.split("?");if((new URLSearchParams(d).get("namespace")??void 0)!==n)return r(a,o);T.parent?.send&&T.parent.send({type:"dependency",path:o});const h=ee.some(l=>o.endsWith(l)),u=te.some(l=>o.endsWith(l));if(!h&&!u)return r(a,o);let m=Q.readFileSync(o,"utf8");if(o.endsWith(".cjs")){const l=b.transformDynamicImport(i,m);l&&(m=W()?_(l):l.code)}else if(h||b.isESM(m)){const l=b.transformSync(m,i,{tsconfigRaw:exports.fileMatcher?.(o)});m=W()?_(l):l.code}a._compile(m,o)},"transformer");M(t,".js",s);for(const a of v)M(t,a,s,{enumerable:!n,writable:!0,configurable:!0});return M(t,".mjs",s,{writable:!0,configurable:!0}),()=>{t[".js"]===s&&(t[".js"]=r);for(const a of[...v,".mjs"])t[a]===s&&delete t[a]}},"createExtensions"),C=c((e,t)=>{if(!t)throw new Error("The current file path (__filename or import.meta.url) must be provided in the second argument of tsx.require()");return e.startsWith(".")?((typeof t=="string"&&t.startsWith("file://")||t instanceof URL)&&(t=w.fileURLToPath(t)),p.resolve(p.dirname(t),e)):e},"resolveContext"),ne=c(e=>{const{sourceMapsEnabled:t}=process,n={enabled:!0};$(process.env.TSX_TSCONFIG_PATH),process.setSourceMapsEnabled(!0);const r=P._resolveFilename,s=Z(n,r,e?.namespace);P._resolveFilename=s;const a=se(n,P._extensions,e?.namespace),i=c(()=>{t===!1&&process.setSourceMapsEnabled(!1),n.enabled=!1,P._resolveFilename===s&&(P._resolveFilename=r),a()},"unregister");if(e?.namespace){const o=c((f,h)=>{const u=C(f,h),[m,l]=u.split("?"),x=new URLSearchParams(l);return e.namespace&&!m.startsWith("node:")&&x.set("namespace",e.namespace),I.require(m+E(x))},"scopedRequire");i.require=o;const d=c((f,h,u)=>{const m=C(f,h),[l,x]=m.split("?"),S=new URLSearchParams(x);return e.namespace&&!l.startsWith("node:")&&S.set("namespace",e.namespace),s(l+E(S),module,!1,u)},"scopedResolve");i.resolve=d,i.unregister=i}return i},"register");exports.fileUrlPrefix=U,exports.inlineSourceMap=_,exports.interopCjsExports=N,exports.isBarePackageNamePattern=L,exports.isDirectoryPattern=X,exports.isJsonPattern=H,exports.loadTsconfig=$,exports.mapTsExtensions=O,exports.register=ne,exports.requestAcceptsQuery=G,exports.tsExtensionsPattern=F;
